<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 420" font-family="'Segoe UI', 'Helvetica Neue', Arial, sans-serif">
  <defs>
    <!-- Drop shadow filter -->
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="112%">
      <feDropShadow dx="1" dy="2" stdDeviation="3" flood-opacity="0.1"/>
    </filter>
    <!-- Subtle gradient backgrounds -->
    <linearGradient id="gradBlue" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#EFF6FF"/>
      <stop offset="100%" style="stop-color:#DBEAFE"/>
    </linearGradient>
    <linearGradient id="gradAmber" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFFBEB"/>
      <stop offset="100%" style="stop-color:#FEF3C7"/>
    </linearGradient>
    <linearGradient id="gradClaude" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFF7F0"/>
      <stop offset="100%" style="stop-color:#FEEBD6"/>
    </linearGradient>
    <linearGradient id="gradEmerald" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ECFDF5"/>
      <stop offset="100%" style="stop-color:#D1FAE5"/>
    </linearGradient>
    <linearGradient id="gradSlate" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#F8FAFC"/>
      <stop offset="100%" style="stop-color:#F1F5F9"/>
    </linearGradient>
    <linearGradient id="gradRose" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFF1F2"/>
      <stop offset="100%" style="stop-color:#FFE4E6"/>
    </linearGradient>
    <!-- Arrowhead marker -->
    <marker id="arrow" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#94A3B8"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1400" height="420" fill="#FAFBFC" rx="8"/>

  <!-- Title -->
  <text x="700" y="42" text-anchor="middle" font-size="22" font-weight="700" fill="#0F172A">NBA Hate Tracker ‚Äî Pipeline Architecture</text>
  <text x="700" y="64" text-anchor="middle" font-size="13" fill="#64748B">Sentiment analysis of 1.57M r/NBA comments across the 2024-25 season</text>

  <!-- ============================================================ -->
  <!-- PHASE LABELS (top) -->
  <!-- ============================================================ -->

  <!-- Phase 1: Ingestion -->
  <text x="130" y="98" text-anchor="middle" font-size="11" font-weight="600" fill="#3B82F6" letter-spacing="1">DATA INGESTION</text>

  <!-- Phase 2: Processing -->
  <text x="430" y="98" text-anchor="middle" font-size="11" font-weight="600" fill="#D97706" letter-spacing="1">PROCESSING</text>

  <!-- Phase 3: Classification -->
  <text x="750" y="98" text-anchor="middle" font-size="11" font-weight="600" fill="#B8733A" letter-spacing="1">CLASSIFICATION</text>

  <!-- Phase 4: Analytics -->
  <text x="1030" y="98" text-anchor="middle" font-size="11" font-weight="600" fill="#059669" letter-spacing="1">ANALYTICS</text>

  <!-- Phase 5: Output -->
  <text x="1280" y="98" text-anchor="middle" font-size="11" font-weight="600" fill="#E11D48" letter-spacing="1">DELIVERY</text>

  <!-- ============================================================ -->
  <!-- STAGE 1: Data Source ‚Äî Arctic Shift API -->
  <!-- ============================================================ -->
  <g filter="url(#shadow)">
    <rect x="30" y="115" width="200" height="155" rx="10" fill="url(#gradBlue)" stroke="#93C5FD" stroke-width="1.5"/>

    <!-- Reddit logo (Bootstrap Icons) -->
    <circle cx="130" cy="158" r="22" fill="white"/>
    <g transform="translate(108, 136) scale(2.75)">
      <path d="M6.167 8a.83.83 0 0 0-.83.83c0 .459.372.84.83.831a.831.831 0 0 0 0-1.661m1.843 3.647c.315 0 1.403-.038 1.976-.611a.23.23 0 0 0 0-.306.213.213 0 0 0-.306 0c-.353.363-1.126.487-1.67.487-.545 0-1.308-.124-1.671-.487a.213.213 0 0 0-.306 0 .213.213 0 0 0 0 .306c.564.563 1.652.61 1.977.61zm.992-2.807c0 .458.373.83.831.83s.83-.381.83-.83a.831.831 0 0 0-1.66 0z" fill="#FF4500"/>
      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.828-1.165c-.315 0-.602.124-.812.325-.801-.573-1.9-.945-3.121-.993l.534-2.501 1.738.372a.83.83 0 1 0 .83-.869.83.83 0 0 0-.744.468l-1.938-.41a.2.2 0 0 0-.153.028.2.2 0 0 0-.086.134l-.592 2.788c-1.24.038-2.358.41-3.17.992-.21-.2-.496-.324-.81-.324a1.163 1.163 0 0 0-.478 2.224q-.03.17-.029.353c0 1.795 2.091 3.256 4.669 3.256s4.668-1.451 4.668-3.256c0-.114-.01-.238-.029-.353.401-.181.688-.592.688-1.069 0-.65-.525-1.165-1.165-1.165" fill="#FF4500"/>
    </g>

    <text x="130" y="202" text-anchor="middle" font-size="14" font-weight="600" fill="#1E3A5F">r/NBA Comments</text>
    <text x="130" y="220" text-anchor="middle" font-size="11" fill="#64748B">Arctic Shift API</text>
    <text x="130" y="238" text-anchor="middle" font-size="11" fill="#64748B">Oct 2024 ‚Äì Jun 2025</text>

    <!-- Volume badge -->
    <rect x="60" y="248" width="140" height="18" rx="9" fill="#3B82F6" opacity="0.12"/>
    <text x="130" y="261" text-anchor="middle" font-size="11" font-weight="600" fill="#2563EB">7.04M comments</text>
  </g>

  <!-- ============================================================ -->
  <!-- ARROW: Ingestion ‚Üí Processing -->
  <!-- ============================================================ -->
  <line x1="235" y1="192" x2="278" y2="192" stroke="#94A3B8" stroke-width="1.8" marker-end="url(#arrow)"/>
  <text x="257" y="183" text-anchor="middle" font-size="9" fill="#94A3B8">JSONL</text>

  <!-- ============================================================ -->
  <!-- STAGE 2: Processing (two sub-stages stacked) -->
  <!-- ============================================================ -->
  <g filter="url(#shadow)">
    <rect x="283" y="115" width="290" height="260" rx="10" fill="url(#gradAmber)" stroke="#FCD34D" stroke-width="1.5"/>

    <!-- Sub-stage: Clean -->
    <rect x="303" y="133" width="250" height="90" rx="8" fill="white" stroke="#F59E0B" stroke-width="1" opacity="0.9"/>
    <text x="323" y="162" font-size="18">üßπ</text>
    <text x="348" y="163" font-size="13" font-weight="600" fill="#92400E">Data Cleaning</text>
    <text x="323" y="183" font-size="11" fill="#78716C">Remove [deleted], [removed], empty</text>
    <text x="323" y="199" font-size="11" fill="#78716C">and malformed comments</text>

    <!-- Volume annotation between sub-stages -->
    <rect x="363" y="228" width="130" height="18" rx="9" fill="#D97706" opacity="0.12"/>
    <text x="428" y="241" text-anchor="middle" font-size="11" font-weight="600" fill="#B45309">6.89M ‚Üí 1.94M</text>

    <!-- Sub-stage: Filter -->
    <rect x="303" y="255" width="250" height="100" rx="8" fill="white" stroke="#F59E0B" stroke-width="1" opacity="0.9"/>
    <text x="323" y="284" font-size="18">üéØ</text>
    <text x="348" y="285" font-size="13" font-weight="600" fill="#92400E">Player Mention Filter</text>
    <text x="323" y="305" font-size="11" fill="#78716C">384 aliases ‚Üí 111 players</text>
    <text x="323" y="321" font-size="11" fill="#78716C">Polars lazy evaluation pipeline</text>
    <text x="323" y="337" font-size="11" fill="#78716C">players.yaml config-driven</text>

  </g>

  <!-- Tech badge for Processing -->
  <rect x="386" y="380" width="84" height="22" rx="11" fill="white" stroke="#F59E0B" stroke-width="1"/>
  <text x="428" y="395" text-anchor="middle" font-size="11" font-weight="500" fill="#B45309">Polars</text>

  <!-- ============================================================ -->
  <!-- ARROW: Processing ‚Üí Classification -->
  <!-- ============================================================ -->
  <line x1="578" y1="245" x2="618" y2="245" stroke="#94A3B8" stroke-width="1.8" marker-end="url(#arrow)"/>
  <text x="598" y="236" text-anchor="middle" font-size="9" fill="#94A3B8">1.94M</text>

  <!-- ============================================================ -->
  <!-- STAGE 3: Classification ‚Äî Anthropic Batch API -->
  <!-- ============================================================ -->
  <g filter="url(#shadow)">
    <rect x="623" y="115" width="253" height="260" rx="10" fill="url(#gradClaude)" stroke="#E8C9A0" stroke-width="1.5"/>

    <!-- Claude logo (Bootstrap Icons) -->
    <g transform="translate(730, 128) scale(2.5)">
      <path d="m3.127 10.604 3.135-1.76.053-.153-.053-.085H6.11l-.525-.032-1.791-.048-1.554-.065-1.505-.08-.38-.081L0 7.832l.036-.234.32-.214.455.04 1.009.069 1.513.105 1.097.064 1.626.17h.259l.036-.105-.089-.065-.068-.064-1.566-1.062-1.695-1.121-.887-.646-.48-.327-.243-.306-.104-.67.435-.48.585.04.15.04.593.456 1.267.981 1.654 1.218.242.202.097-.068.012-.049-.109-.181-.9-1.626-.96-1.655-.428-.686-.113-.411a2 2 0 0 1-.068-.484l.496-.674L4.446 0l.662.089.279.242.411.94.666 1.48 1.033 2.014.302.597.162.553.06.17h.105v-.097l.085-1.134.157-1.392.154-1.792.052-.504.25-.605.497-.327.387.186.319.456-.045.294-.19 1.23-.37 1.93-.243 1.29h.142l.161-.16.654-.868 1.097-1.372.484-.545.565-.601.363-.287h.686l.505.751-.226.775-.707.895-.585.759-.839 1.13-.524.904.048.072.125-.012 1.897-.403 1.024-.186 1.223-.21.553.258.06.263-.218.536-1.307.323-1.533.307-2.284.54-.028.02.032.04 1.029.098.44.024h1.077l2.005.15.525.346.315.424-.053.323-.807.411-3.631-.863-.872-.218h-.12v.073l.726.71 1.331 1.202 1.667 1.55.084.383-.214.302-.226-.032-1.464-1.101-.565-.497-1.28-1.077h-.084v.113l.295.432 1.557 2.34.08.718-.112.234-.404.141-.444-.08-.911-1.28-.94-1.44-.759-1.291-.093.053-.448 4.821-.21.246-.484.186-.403-.307-.214-.496.214-.98.258-1.28.21-1.016.19-1.263.112-.42-.008-.028-.092.012-.953 1.307-1.448 1.957-1.146 1.227-.274.109-.477-.247.045-.44.266-.39 1.586-2.018.956-1.25.617-.723-.004-.105h-.036l-4.212 2.736-.75.096-.324-.302.04-.496.154-.162 1.267-.871z" fill="#D4A574"/>
    </g>

    <text x="750" y="190" text-anchor="middle" font-size="14" font-weight="600" fill="#6B3A0A">Claude Haiku 4.5</text>
    <text x="750" y="208" text-anchor="middle" font-size="11" fill="#A0622D">Anthropic Batch API</text>

    <!-- Details -->
    <rect x="643" y="222" width="213" height="135" rx="8" fill="white" stroke="#D4A574" stroke-width="1" opacity="0.85"/>

    <text x="663" y="245" font-size="11" fill="#8B4513" font-weight="500">20 batches √ó 100K requests</text>
    <text x="663" y="265" font-size="11" fill="#78716C">3-class: positive / negative / neutral</text>
    <text x="663" y="285" font-size="11" fill="#78716C">+ confidence score (0‚Äì1)</text>
    <text x="663" y="305" font-size="11" fill="#78716C">+ targeted player attribution</text>

    <!-- Success rate badge -->
    <rect x="700" y="320" width="100" height="22" rx="11" fill="#059669" opacity="0.1"/>
    <text x="750" y="335" text-anchor="middle" font-size="11" font-weight="600" fill="#047857">97.3% usable</text>
  </g>

  <!-- ============================================================ -->
  <!-- ARROW: Classification ‚Üí Analytics -->
  <!-- ============================================================ -->
  <line x1="881" y1="245" x2="918" y2="245" stroke="#94A3B8" stroke-width="1.8" marker-end="url(#arrow)"/>
  <text x="900" y="236" text-anchor="middle" font-size="9" fill="#94A3B8">.parquet</text>

  <!-- ============================================================ -->
  <!-- STAGE 4: Analytics & Aggregation -->
  <!-- ============================================================ -->
  <g filter="url(#shadow)">
    <rect x="923" y="115" width="215" height="260" rx="10" fill="url(#gradEmerald)" stroke="#6EE7B7" stroke-width="1.5"/>

    <text x="1030" y="160" text-anchor="middle" font-size="28">üìä</text>

    <text x="1030" y="190" text-anchor="middle" font-size="14" font-weight="600" fill="#064E3B">Aggregation Engine</text>

    <rect x="943" y="205" width="175" height="150" rx="8" fill="white" stroke="#34D399" stroke-width="1" opacity="0.85"/>

    <text x="963" y="230" font-size="11" fill="#065F46" font-weight="500">Computed Views:</text>
    <text x="963" y="250" font-size="11" fill="#78716C">‚ñ∏ Player overall rankings</text>
    <text x="963" y="270" font-size="11" fill="#78716C">‚ñ∏ Player √ó team flair matrix</text>
    <text x="963" y="290" font-size="11" fill="#78716C">‚ñ∏ Weekly temporal trends</text>
    <text x="963" y="310" font-size="11" fill="#78716C">‚ñ∏ Team fanbase profiles</text>

    <!-- Output format badge -->
    <rect x="970" y="325" width="120" height="22" rx="11" fill="#059669" opacity="0.1"/>
    <text x="1030" y="340" text-anchor="middle" font-size="11" font-weight="600" fill="#047857">aggregates.json</text>
  </g>

  <!-- ============================================================ -->
  <!-- ARROWS: Analytics ‚Üí Outputs (forking) -->
  <!-- ============================================================ -->
  <!-- Arrow to Streamlit (upper) -->
  <path d="M 1143 210 L 1170 210 L 1170 178 L 1195 178" fill="none" stroke="#94A3B8" stroke-width="1.8" marker-end="url(#arrow)"/>

  <!-- Arrow to Flourish (lower) -->
  <path d="M 1143 280 L 1170 280 L 1170 318 L 1195 318" fill="none" stroke="#94A3B8" stroke-width="1.8" marker-end="url(#arrow)"/>

  <!-- ============================================================ -->
  <!-- STAGE 5a: Streamlit Dashboard -->
  <!-- ============================================================ -->
  <g filter="url(#shadow)">
    <rect x="1200" y="115" width="175" height="120" rx="10" fill="url(#gradRose)" stroke="#FDA4AF" stroke-width="1.5"/>

    <!-- Streamlit logo (Simple Icons) -->
    <g transform="translate(1271, 129) scale(1.333)">
      <path d="M16.673 11.32l6.862-3.618c.233-.136.554.12.442.387L20.463 17.1zm-8.556-.229l3.473-5.187c.203-.328.578-.316.793-.028l7.886 11.75zm-3.375 7.25c-.28 0-.835-.284-.993-.716l-3.72-9.46c-.118-.331.139-.614.48-.464l19.474 10.306c-.149.147-.453.337-.72.334z" fill="#FF4B4B"/>
    </g>

    <text x="1287" y="178" text-anchor="middle" font-size="13" font-weight="600" fill="#881337">Streamlit Dashboard</text>
    <text x="1287" y="196" text-anchor="middle" font-size="11" fill="#9F1239">Streamlit Cloud</text>
    <text x="1287" y="216" text-anchor="middle" font-size="10" fill="#78716C">Leaderboard ¬∑ Flair View</text>
    <text x="1287" y="230" text-anchor="middle" font-size="10" fill="#78716C">Player Profiles</text>
  </g>

  <!-- ============================================================ -->
  <!-- STAGE 5b: Flourish Bar Race -->
  <!-- ============================================================ -->
  <g filter="url(#shadow)">
    <rect x="1200" y="255" width="175" height="120" rx="10" fill="url(#gradSlate)" stroke="#CBD5E1" stroke-width="1.5"/>
    <text x="1287" y="295" text-anchor="middle" font-size="24">üèÅ</text>
    <text x="1287" y="318" text-anchor="middle" font-size="13" font-weight="600" fill="#1E293B">Bar Chart Race</text>
    <text x="1287" y="336" text-anchor="middle" font-size="11" fill="#475569">Flourish</text>
    <text x="1287" y="356" text-anchor="middle" font-size="10" fill="#78716C">40-week animated rankings</text>
    <text x="1287" y="370" text-anchor="middle" font-size="10" fill="#78716C">Neg rate over time</text>
  </g>

</svg>